{"body":"Workflowy Roll-Up Bookmarklet\r\n=============================\r\n\r\nSimple bookmarklet that adds a \"sum\" to nodes in a Workflowy document, allowing for easy roll-up calculations of hierarchical data.\r\n\r\nValues are calculated by extracting an integer enclose by square brackets from the end of any Workflowy node, and summing with the total of the values of nested nodes.\r\n\r\nSee demo.html for an example.\r\n\r\nInstall: [Workflowy Roll-Up](javascript:(function(){var%20valueFromString=function(str){var%20r=str.match(/\\[(\\d+)\\]$/);if(r){return%20parseInt(r[1],10);}else{return%200;}};var%20nodeValue=function(el){var%20value=$(el).attr('data-node-value');if(value===undefined){var%20name=$(el).children('.name').children('.content').text();var%20myVal=valueFromString(name);var%20childVals=0;$(el).children('.children').children('.project').each(function(idx,childEl){childVals+=nodeValue(childEl);});value=myVal+childVals;$(el).attr('data-node-value',value);}return%20value;};var%20addRollups=function(){$('.project').each(function(idx,el){val=nodeValue(el);if(val){$(el).addClass('js-changed-name');$name=$(el).children('.name').children('.content');$(el).attr('data-original-name',$name.text());$name.append(%22%20%3Cem%3E%26mdash;%20%22+nodeValue(el)+%22%3C/em%3E%22);}});};var%20removeRollups=function(){$('.js-changed-name').each(function(idx,el){$(el).children('.name').children('.content').text($(el).attr('data-original-name'));$(el).removeClass('js-changed-name');});};var%20toggleRollups=function(){if(window.rollupsToggled){removeRollups();window.rollupsToggled=0;}else{addRollups();window.rollupsToggled=1;}};toggleRollups();$('%23toggleButton').click(toggleRollups);})();)","tagline":"Simple bookmarklet that adds a \"sum\" to nodes in a Workflowy document, allowing for easy roll-up calculations of hierarchical data.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Workflowy Roll-Up"}